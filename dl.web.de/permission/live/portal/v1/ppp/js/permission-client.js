var PermissionClient=function(){"use strict";function e(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1}Array.prototype.find=Array.prototype.find||function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),n=t.length>>>0,o=arguments[1],r=0;r<n;r++){var i=t[r];if(e.call(o,i,r,t))return i}},Array.prototype.findIndex=Array.prototype.findIndex||function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),n=t.length>>>0,o=arguments[1],r=0;r<n;r++)if(e.call(o,t[r],r,t))return r;return-1};var t=function(){return t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};function n(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function o(e,t){var n,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}/*! js-cookie v3.0.5 | MIT */
function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}"function"==typeof SuppressedError&&SuppressedError;var i=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(o[s]=t.read(a,s),e===s)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function a(e,t,n){if(2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var s={debug:[],info:[],warn:[],error:[]};var c,l={debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,a(a([],s.debug,!1),e,!1))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,a(a([],s.info,!1),e,!1))},warn:function(e,t,n){console.warn.apply(console,a(a([],s.warn,!1),[e,t,n],!1))},error:function(e,t,n){console.error.apply(console,a(a([],s.error,!1),[e,t,n],!1))},setLogPrefixes:function(e){e instanceof Array?(s.debug=e,s.info=e,s.warn=e,s.error=e):(s.debug=e.debug||[],s.info=e.info||[],s.warn=e.warn||[],s.error=e.error||[])}};!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.none=4]="none"}(c||(c={}));var u=[l],d=c.debug;function p(e){d=e}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];d<=c.debug&&u.filter((function(e){return"function"==typeof e.debug})).forEach((function(t){t.debug.apply(t,e)}))}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];d<=c.info&&u.filter((function(e){return"function"==typeof e.info})).forEach((function(t){t.info.apply(t,e)}))}function h(e,t,n){d<=c.warn&&u.filter((function(e){return"function"==typeof e.warn})).forEach((function(o){o.warn(e,t,n)}))}function g(e,t,n){d<=c.error&&u.filter((function(e){return"function"==typeof e.error})).forEach((function(o){o.error(e,t,n)}))}var v=Object.defineProperty,y=Object.defineProperties,w=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,E=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))C.call(t,n)&&E(e,n,t[n]);if(b)for(var n of b(t))P.call(t,n)&&E(e,n,t[n]);return e},_=(e,t,n)=>E(e,"symbol"!=typeof t?t+"":t,n);function T(e,t,n){if(2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var L={debug:[],info:[],warn:[],error:[]};var S,O,N={debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,T(T([],L.debug,!1),e,!1))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,T(T([],L.info,!1),e,!1))},warn:function(e,t,n){console.warn.apply(console,T(T([],L.warn,!1),[e,t,n],!1))},error:function(e,t,n){console.error.apply(console,T(T([],L.error,!1),[e,t,n],!1))},setLogPrefixes:function(e){e instanceof Array?(L.debug=e,L.info=e,L.warn=e,L.error=e):(L.debug=e.debug||[],L.info=e.info||[],L.warn=e.warn||[],L.error=e.error||[])}};(O=S||(S={}))[O.debug=0]="debug",O[O.info=1]="info",O[O.warn=2]="warn",O[O.error=3]="error",O[O.none=4]="none";var I=[N],k=S.debug;function A(e,t,n){k<=S.error&&I.filter((function(e){return"function"==typeof e.error})).forEach((function(o){o.error(e,t,n)}))}var R={dev:"",qa:"-qa",prelive:"-pre",live:""},D={"1and1":"navigator.1und1.de","1und1":"navigator.1und1.de",gmxat:"navigator.gmx.net",gmxch:"navigator.gmx.net",gmxcom:"navigator-bs.gmx.com",gmxcouk:"navigator-bs.gmx.co.uk",gmxes:"navigator-bs.gmx.es",gmxfr:"navigator-bs.gmx.fr",gmxnet:"navigator.gmx.net",mailcom:"navigator-lxa.mail.com",webde:"navigator.web.de"},M={"1and1":"1and1.navigator.local.server.lan:8443","1und1":"1and1.navigator.local.server.lan:8443",gmxat:"gmx.navigator.local.server.lan:8443",gmxch:"gmx.navigator.local.server.lan:8443",gmxcom:"gmxcom.navigator.local.server.lan:8443",gmxcouk:"gmxcom.navigator.local.server.lan:8443",gmxes:"gmxcom.navigator.local.server.lan:8443",gmxfr:"gmxcom.navigator.local.server.lan:8443",gmxnet:"gmx.navigator.local.server.lan:8443",mailcom:"mailcom.navigator.local.server.lan:8443",webde:"webde.navigator.local.server.lan:8443"};var U,F=class{constructor(e){_(this,"serviceUrl"),_(this,"data",{meta:{brand:null},counters:[],durations:[]}),e.brand=["gmx","gmxde"].includes(e.brand)?"gmxnet":e.brand,this.serviceUrl=function(e,t,n){const o=R[t]||"",r="dev"===t?M[e]:D[e];if(!r)throw new Error(`No Epimetheus domain configured for brand ${e}!`);return`https://epimetheus${o}.${r}/monitoring/${n}`}(e.brand,e.stage,e.client),this.data.meta=x({brand:e.brand},e.metaData),this.addListeners()}addListeners(){const e=this.flush.bind(this);document.addEventListener("visibilitychange",e,{capture:!0}),window.addEventListener("pagehide",e,{capture:!0}),window.addEventListener("beforeunload",e,{capture:!0})}clearData(){this.data.counters=[],this.data.durations=[]}pushCounter(e){e instanceof Array||(e=[e]),this.data.counters.push(...e)}pushDuration(e){e instanceof Array||(e=[e]),this.data.durations.push(...e)}flush(){if(navigator.sendBeacon&&this.hasData())try{navigator.sendBeacon(this.serviceUrl,JSON.stringify(this.data))?this.clearData():A("Monitoring beacon was not queued!")}catch(e){A("Error while sending monitoring beacon",e)}}hasData(){return this.data.counters.length>0||this.data.durations.length>0}},j=class extends F{constructor(e){var t;super((t=x({},e),y(t,w({client:"ppp"}))))}monitorPppLifecycleStarted(){this.pushCounter({name:"lifecycle",event:"started"})}monitorPppLifecycleEnded(e=!0,t=void 0){const n={name:"lifecycle",event:e?"ended":"aborted"};!1===e&&t&&(n.reason=t),this.pushCounter(n)}monitorPppCoreIframeLoadFailed(){this.pushCounter({name:"core_iframe_load",event:"failed"})}monitorPppCoreIframeLoadDuration(e){this.pushDuration({name:"core_iframe_load",duration:Date.now()-e})}monitorPppLayerIframeLoadDuration(e){this.pushDuration({name:"adition_iframe_load",duration:Date.now()-e})}monitorPppLocalStorageReadFailed(){this.pushCounter({name:"local_storage",event:"read_failed"})}monitorPppLocalStorageWriteFailed(){this.pushCounter({name:"local_storage",event:"write_failed"})}monitorPppPermissionModelUpdate(e,t,n=!0){this.pushCounter({name:"permission_model_update",event:n?"successful":"failed",usecase:e,status:t})}monitorPppTcfUpdated(e,t=!0){this.pushCounter({name:"tcf_data_update",event:t?"successful":"failed",tcStatus:e})}monitorPppLayerConnected(){this.pushCounter({name:"layer",event:"connected"})}monitorPppLayerDisplayed(){this.pushCounter({name:"layer",event:"displayed"})}monitorPppLayerNextRequested(){this.pushCounter({name:"layer",event:"next_requested"})}monitorPppLayerCompleted(){this.pushCounter({name:"layer",event:"completed"})}monitorPppAditionIframeLoad(){this.pushCounter({name:"adition_iframe_load",event:"started"})}monitorPppAditionIframeLoadFailed(){this.pushCounter({name:"adition_iframe_load",event:"failed"})}monitorPppEuconsentCookieUpdateFailed(){this.pushCounter({name:"tcf_cookie_euconsentv2_set",event:"failed"})}monitorPppCookieTransferFailed(){this.pushCounter({name:"tcf_cookie_transfer",event:"failed"})}monitorPppTcfSyncStarted(){this.pushCounter({name:"tcf_sync",event:"started"})}monitorPppTcfSyncFailed(){this.pushCounter({name:"tcf_sync",event:"failed"})}monitorPppPpsGetSent(e){this.pushCounter({name:"pps_get_request",event:"sent",identityType:e})}monitorPppPpsGetFailed(){this.pushCounter({name:"pps_get_request",event:"failed"})}monitorPppPpsPostSent(e,t,n){this.pushCounter({name:"pps_post_request",event:"sent",identityType:n,usecase:e,status:t})}monitorPpsPostFailed(e,t,n){this.pushCounter({name:"pps_post_request",event:"failed",identityType:n,usecase:e,status:t})}},q=function(e){switch(e){case"gmx":case"gmxat":case"gmxch":return"gmx";case"uim":return"webde";default:return e}},V=function(e){return"string"==typeof(null==e?void 0:e.section)?e.section.split("/")[0]:null==e?void 0:e.category},z="PRODUCTION",B="UI_CMP_PERMISSION_DATA",H="ppp/core.html",G="1.98.6";try{JSON.parse("true")}catch(e){0}var Y={webde:"https://dl.web.de/permission",gmx:"https://dl.gmx.net/permission",gmxnet:"https://dl.gmx.net/permission",gmxat:"https://dl.gmx.at/permission",gmxch:"https://dl.gmx.ch/permission",gmxes:"https://dl.gmx.es/permission",gmxfr:"https://dl.gmx.fr/permission",gmxcom:"https://dl.gmx.com/permission",gmxcouk:"https://dl.gmx.co.uk/permission",mailcom:"https://dl.mail.com/permission","1und1":"https://dl.1und1.de/permission","1und1de":"https://dl.1und1.de/permission",uim:"https://s.uicdn.com/permission"},J=["gmx","gmxat","gmxch","gmxcom","gmxcouk","gmxes","gmxfr","mailcom","webde","1und1","uim"],Q="__ppp__";function $(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W,K={};var X=function(){if(W)return K;W=1,Object.defineProperty(K,"__esModule",{value:!0}),K.default=K.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM=K.ERR_NOT_IN_IFRAME=K.ERR_CONNECTION_TIMEOUT=K.ERR_CONNECTION_DESTROYED=void 0;var e="handshake",t="handshake-reply",n="call",o="reply",r="fulfilled",i="rejected",a="message",s="ConnectionDestroyed";K.ERR_CONNECTION_DESTROYED=s;var c="ConnectionTimeout";K.ERR_CONNECTION_TIMEOUT=c;var l="NotInIframe";K.ERR_NOT_IN_IFRAME=l;var u="IframeAlreadyAttachedToDom";K.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM=u;var d,p={"http:":"80","https:":"443"},f=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/,m={ERR_CONNECTION_DESTROYED:s,ERR_CONNECTION_TIMEOUT:c,ERR_NOT_IN_IFRAME:l,ERR_IFRAME_ALREADY_ATTACHED_TO_DOM:u,Promise:function(){try{return window?window.Promise:null}catch(e){return null}}(),debug:!1},h=(d=0,function(){return++d}),g=function(){if(m.debug){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=console).log.apply(e,["[Penpal]"].concat(n))}},v=function(e){var t=[];return e((function(){t.forEach((function(e){e()}))})),{then:function(e){t.push(e)}}},y=function(e){return{name:e.name,message:e.message,stack:e.stack}},w=function(e,t,i,c,l){var u=t.localName,d=t.local,p=t.remote,f=t.remoteOrigin,v=!1;g("".concat(u,": Connecting call sender"));var y=function(e){return function(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];if(g("".concat(u,": Sending ").concat(e,"() call")),p.closed&&c(),v){var y=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw y.code=s,y}return new m.Promise((function(t,s){var c=h();d.addEventListener(a,(function n(i){if(i.source===p&&i.origin===f&&i.data.penpal===o&&i.data.id===c){g("".concat(u,": Received ").concat(e,"() reply")),d.removeEventListener(a,n);var l=i.data.returnValue;i.data.returnValueIsError&&(m=l,h=new Error,Object.keys(m).forEach((function(e){return h[e]=m[e]})),l=h),(i.data.resolution===r?t:s)(l)}var m,h})),p.postMessage({penpal:n,id:c,methodName:e,args:i},f)}))}};l.then((function(){v=!0})),i.reduce((function(e,t){return e[t]=y(t),e}),e)},b=function(e,t,s){var c=e.localName,l=e.local,u=e.remote,d=e.remoteOrigin,p=!1;g("".concat(c,": Connecting call receiver"));var f=function(e){if(e.source===u&&e.origin===d&&e.data.penpal===n){var a=e.data,s=a.methodName,l=a.args,f=a.id;if(g("".concat(c,": Received ").concat(s,"() call")),s in t){var h=function(e){return function(t){if(g("".concat(c,": Sending ").concat(s,"() reply")),p)g("".concat(c,": Unable to send ").concat(s,"() reply due to destroyed connection"));else{var n={penpal:o,id:f,resolution:e,returnValue:t};e===i&&t instanceof Error&&(n.returnValue=y(t),n.returnValueIsError=!0);try{u.postMessage(n,d)}catch(e){throw"DataCloneError"===e.name&&u.postMessage({penpal:o,id:f,resolution:i,returnValue:y(e),returnValueIsError:!0},d),e}}}};new m.Promise((function(e){return e(t[s].apply(t,l))})).then(h(r),h(i))}}};l.addEventListener(a,f),s.then((function(){p=!0,l.removeEventListener(a,f)}))};m.connectToChild=function(n){var o,r=n.url,i=n.appendTo,l=n.iframe,d=n.methods,h=void 0===d?{}:d,y=n.timeout;if(l&&l.parentNode){var C=new Error("connectToChild() must not be called with an iframe already attached to DOM");throw C.code=u,C}var P=new v((function(e){o=e})),E=window;(l=l||document.createElement("iframe")).src=r;var x=function(e){var t,n,o,r=document.location,i=f.exec(e);if(i?(t=i[1]?i[1]:r.protocol,n=i[2],o=i[4]):(t=r.protocol,n=r.hostname,o=r.port),"file:"===t)return"null";var a=o&&o!==p[t]?":".concat(o):"";return"".concat(t,"//").concat(n).concat(a)}(r),_=new m.Promise((function(n,r){var u;void 0!==y&&(u=setTimeout((function(){var e=new Error("Connection to child timed out after ".concat(y,"ms"));e.code=c,r(e),o()}),y));var d,p,f={},m=function(r){var i=l.contentWindow;if(r.source===i&&r.origin===x&&r.data.penpal===e){g("Parent: Received handshake, sending reply");var a="null"===r.origin?"*":r.origin;r.source.postMessage({penpal:t,methodNames:Object.keys(h)},a);var s={localName:"Parent",local:E,remote:i,remoteOrigin:a};p&&p();var c=new v((function(e){P.then(e),p=e}));b(s,h,c),d&&d.forEach((function(e){delete f[e]})),d=r.data.methodNames,w(f,s,d,o,P),clearTimeout(u),n(f)}};E.addEventListener(a,m),g("Parent: Loading iframe"),(i||document.body).appendChild(l);var C=setInterval((function(){document.body.contains(l)||(clearInterval(C),o())}),6e4);P.then((function(){l.parentNode&&l.parentNode.removeChild(l),E.removeEventListener(a,m),clearInterval(C);var e=new Error("Connection destroyed");e.code=s,r(e)}))}));return{promise:_,iframe:l,destroy:o}},m.connectToParent=function(){var n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o.parentOrigin,i=void 0===r?"*":r,u=o.methods,d=void 0===u?{}:u,p=o.timeout;if(window===window.top){var f=new Error("connectToParent() must be called within an iframe");throw f.code=l,f}var h=new v((function(e){n=e})),y=window,C=y.parent,P=new m.Promise((function(o,r){var l;void 0!==p&&(l=setTimeout((function(){var e=new Error("Connection to parent timed out after ".concat(p,"ms"));e.code=c,r(e),n()}),p));var u=function e(r){if(("*"===i||i===r.origin)&&r.source===C&&r.data.penpal===t){g("Child: Received handshake reply"),y.removeEventListener(a,e);var s={localName:"Child",local:y,remote:C,remoteOrigin:r.origin},c={};b(s,d,h),w(c,s,r.data.methodNames,n,h),clearTimeout(l),o(c)}};y.addEventListener(a,u),h.then((function(){y.removeEventListener(a,u);var e=new Error("Connection destroyed");e.code=s,r(e)})),g("Child: Sending handshake"),C.postMessage({penpal:e,methodNames:Object.keys(d)},i)}));return{promise:P,destroy:n}};var C=m;return K.default=C,K}(),Z=$(X);var ee=-1!==window.location.hostname.indexOf("co.uk")?window.location.hostname.split(".").slice(-3).join("."):window.location.hostname.split(".").slice(-2).join(".");function te(){return ee}function ne(e){var t,n;0!==e.indexOf("http")&&(t=e,(n=document.createElement("a")).href=t,e=n.href);var o=/(.*?)\/ppp\//.exec(e);return o&&o[1]?o[1]:null}var oe,re=function(){function e(e){if(this.moduleName="LayerService",e instanceof HTMLElement)this.permissionLayer=e;else if("string"==typeof e)try{this.permissionLayer=document.querySelector(e)}catch(e){g("[".concat(this.moduleName,"] initialize"),e)}this.permissionLayer||(m(this.moduleName,"initialize","No layer element found, creating a new one."),this.permissionLayer=this.createLayer(),document.body.appendChild(this.permissionLayer))}return e.prototype.createLayer=function(){var e=document.createElement("div");return e.classList.add("permission-layer-default"),e},e.prototype.removeLayer=function(){if(this.permissionLayer)try{this.permissionLayer&&this.permissionLayer.parentNode&&this.permissionLayer.parentNode.removeChild(this.permissionLayer),this.permissionLayer=null}catch(e){g("[".concat(this.moduleName,"] removeLayer"),e)}else h("[".concat(this.moduleName,"] removeLayer: There is no layer to be removed."))},e}();function ie(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e){"complete"!==document.readyState?document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&e()})):e()}))]}))}))}!function(e){e.settings_invalid="Invalid PPP client settings",e.cookies_unsupported="Cookies not supported",e.pps_get_401="Failed to get permission data: Unauthorized",e.pps_get_timeout="Failed to get permission data: Timed out",e.pps_get_other="Failed to get permission data: Other",e.core_load_timeout="Failed to load PPP Core: Timed out",e.core_load_other="Failed to load PPP Core: Other"}(oe||(oe={}));var ae=function(){function e(){var e=this;this.moduleName="CoreService",this.clientApi={openPermissionLayer:function(t){return n(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return m(this.moduleName,"initializeCommandListener","PermissionClient received command 'openPermissionLayer'. Going to open the permission layer, Options:",t),this.iframe&&this.childConnection&&this.childConnection.iframe&&this.iframe===this.childConnection.iframe?(this.showIframe(null==t?void 0:t.title),[4,this.options.onShowLayer(null==t?void 0:t.trackingData)]):[3,2];case 1:return n.sent(),[3,4];case 2:return e="Permission Core iframe does not exist!",g("[".concat(this.moduleName,"] openPermissionLayer: ").concat(e)),[4,this.options.onComplete(!1,new Error(e))];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},closePermissionLayer:function(t,r){return n(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return m(this.moduleName,"PermissionClient received command 'closePermissionLayer'. Finishing Lifecycle."),this.onChangePromise?[4,this.onChangePromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return t||g("[".concat(this.moduleName,"] closePermissionLayer"),r),[4,this.options.onComplete(t,r)];case 3:return e.sent(),this.destroy(),[2]}}))}))},setPermissions:function(t){return n(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return m(this.moduleName,"setPermission","Publisher page received the 'setPermissions' command, calling 'onChange'",t),this.onChangePromise?[4,this.onChangePromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.onChangePromise=this.options.onChange(t),[4,this.onChangePromise];case 3:return e.sent(),[2]}}))}))},resizePermissionLayer:function(t){m(e.moduleName,"resizePermissionLayer","Publisher page received the 'resizePermissionLayer command', going to resize the layer",t.height),"number"==typeof t.height?e.iframe.style.height=t.height+"px":"string"==typeof t.height&&(e.iframe.style.height=t.height),e.options.onResizeLayer(t)},getClientSettings:function(){return n(e,void 0,void 0,(function(){var e;return o(this,(function(n){return e=t({},this.options),Object.entries(e).forEach((function(t){var n=t[0];"function"==typeof t[1]&&delete e[n]})),[2,e]}))}))},getIdentity:function(){return e.options.getIdentity()},getModel:function(t){return e.options.getModel(t)}}}return e.prototype.init=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.options=e,[4,ie()];case 1:n.sent(),this.layerService=new re(this.options.layerContainer),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.loadPermissionCore()];case 3:return n.sent(),[3,5];case 4:throw t=n.sent(),null==U||U.monitorPppCoreIframeLoadFailed(),t;case 5:return f(this.moduleName,"init","Module initialized."),[4,this.permissionCore.initializePermissionLayer()];case 6:return n.sent(),[2]}}))}))},e.prototype.layerDisplayed=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.permissionCore.layerDisplayed()];case 1:return e.sent(),[2]}}))}))},e.prototype.destroy=function(){this.childConnection&&(this.childConnection.destroy(),this.childConnection=null),this.layerService&&(this.layerService.removeLayer(),this.layerService=null),this.iframe&&(this.iframe.src="about:blank",this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=null),this.onChangePromise=null,this.enableScrolling(!0)},e.prototype.loadPermissionCore=function(){return n(this,void 0,void 0,(function(){var e,t,n,r,i;return o(this,(function(o){switch(o.label){case 0:e=this.layerService.permissionLayer,void 0===Z.Promise&&(Z.Promise=window.Promise),t=Date.now(),this.iframe=this.createIframe(),o.label=1;case 1:return o.trys.push([1,3,,4]),this.childConnection=Z.connectToChild({url:this.getCoreUrl(),iframe:this.iframe,appendTo:e,timeout:"ontouchstart"in document.documentElement?6e3:8e3,methods:this.clientApi}),n=this,[4,this.childConnection.promise];case 2:return n.permissionCore=o.sent(),[3,4];case 3:throw r=o.sent(),i=oe.core_load_other,-1!==r.message.indexOf("timed out")&&(i=oe.core_load_timeout),new Error(i);case 4:return null==U||U.monitorPppCoreIframeLoadDuration(t),[2]}}))}))},e.prototype.createIframe=function(){var e=document.createElement("iframe"),n=t({class:"permission-core-iframe",width:"100%",border:"0",frameborder:"0",marginwidth:"0",marginheight:"0",allowtransparency:"true",background:"transparent",scrolling:"no",sandbox:"allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"},void 0!==this.options.section&&{name:this.options.section});return e.style.position="absolute",e.style.top="-99999px",e.style.left="-99999px",e.style.display="block",e.style.width="100%",e.style.height="100%",e.style.border="0",e.style.zIndex="2147483647",Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),f(this.moduleName,"createIframe","New Iframe created",e),e},e.prototype.showIframe=function(e){var t;this.iframe?(this.iframe.style.position="fixed",this.iframe.style.top="auto",this.iframe.style.bottom="0",this.iframe.style.left="0",this.iframe.style.right="auto","string"==typeof e&&(null===(t=this.iframe)||void 0===t||t.setAttribute("title",e)),this.enableScrolling(!1)):g("[".concat(this.moduleName,"] showIframe: There is no iframe to be shown"))},e.prototype.getCoreUrl=function(){try{var e=ne((n="permission-client.js",Array.from(document.getElementsByTagName("script")).map((function(e){return e.getAttribute("src")})).filter((function(e){return!!e})).find((function(e){return-1!==e.indexOf(n)}))));if("string"==typeof e&&0===e.indexOf("http")){var t="".concat(e,"/").concat(H);return f(this.moduleName,"getCoreUrl","determined URL from bundle src:",t),t}}catch(e){h("[".concat(this.moduleName,"] getCoreUrl: Unable to determine core path from client bundle URL"),e)}var n,o="live;";this.options&&this.options.stage?o=this.options.stage:"QA"===String(z)&&(o="qa");var r="".concat(function(e,t){void 0===t&&(t="live");var n=Y[te().replace(/\./g,"")];if(n||(n=Y[e]),!n)throw new Error("getBaseUrlFromConfig: Failed to get base url for current domain ".concat(te()," or configured portal '").concat(e,"'!"));return"".concat(n,"/").concat(t,"/v").concat(G)}(this.options?this.options.portal:"uim",o),"/").concat(H);return f(this.moduleName,"getCoreUrl","falling back to configured URL:",r),r},e.prototype.enableScrolling=function(e){if(e)window.onscroll=function(){};else{var t=window.scrollX,n=window.scrollY;window.onscroll=function(){window.scrollTo(t,n)}}},e}();var se=!1;try{window.localStorage.setItem("__permissionTest","__permissionTest"),window.localStorage.removeItem("__permissionTest"),se=!0}catch(A){null==U||U.monitorPppLocalStorageReadFailed()}function ce(){var e=[],t=window.localStorage.getItem(B);if(!t)return e;try{e=JSON.parse(t)}catch(e){g("[LocalStorage] getAllLocalPermissionModels: error parsing data from local storage",e)}return e}function le(e){"string"!=typeof e&&(e=null);var t={tcString:null,tcfVersion:null,identity:e||null,tcStatus:null,data:[]};if(!se)return g("[LocalStorage] getLocalPermissionModel: Storage not available."),t;var n=ce(),o=null==n?void 0:n.find((function(t){return t.identity===e}));if(!o)return m("LocalStorage","getLocalPermissionModel","No locally stored permission model found for identity ".concat(e,".")),t;f("LocalStorage","getLocalPermissionModel","using matching local model for identity ".concat(e)),o.data instanceof Array||(o.data=[]);try{!function(e){if(!(e instanceof Object))throw new Error("Model is not an object");if(e.identity&&"string"!=typeof e.identity)throw new Error("Model.identity is not a string");if(e.tcString&&"string"!=typeof e.tcString)throw new Error("Model.tcString is not a string");if(e.tcStatus&&"string"!=typeof e.tcStatus)throw new Error("Model.tcStatus is not a string");if(null!==e.tcfVersion&&"string"!=typeof e.tcfVersion&&"number"!=typeof e.tcfVersion)throw new Error("Model.tcfVersion is not a string or number");if(!(e.data instanceof Array))throw new Error("Model.data is not an array");var t=e.data.filter((function(e){return"object"!=typeof e||"string"!=typeof e.usecase||"VALID"!==e.status&&"INVALID"!==e.status||!(!e.timestamp||"string"==typeof e.timestamp)||!(!e.touchpointVisualization||"string"==typeof e.touchpointVisualization)||!(!e.identityType||"string"==typeof e.identityType)}));if(t.length>0)throw new Error("Model.data contains ".concat(t.length," invalid permission(s)"))}(o)}catch(e){return g("Invalid local permission model",e),t}return o}var ue,de=function(e,t){return fe("getPermission",e,t)},pe=function(e){return fe("updateTCString",e)},fe=function(e,t,n){return new Promise((function(o){try{window.__tcfapi(e,2,(function(e){o(e)}),t,n)}catch(e){g("[TCF] callTcfApi failed",e),o(null)}}))},me="euconsent-v2",he="ui_cid",ge="consentLevel",ve="idcc",ye={thirdParty:"https://t.uimserv.net/mam_optin_p/",firstParty:{"web.de":"https://ymprove.web.de/mam_optin_p/","gmx.net":"https://ymprove.gmx.net/mam_optin_p/","gmx.at":"https://ymprove.gmx.at/mam_optin_p/","gmx.ch":"https://ymprove.gmx.ch/mam_optin_p/","1und1.de":"https://ymprove.1und1.de/mam_optin_p/"}},we={thirdParty:"https://t.uimserv.net/mam_optout_p/",firstParty:{"web.de":"https://ymprove.web.de/mam_optout_p/","gmx.net":"https://ymprove.gmx.net/mam_optout_p/","gmx.at":"https://ymprove.gmx.at/mam_optout_p/","gmx.ch":"https://ymprove.gmx.ch/mam_optout_p/","1und1.de":"https://ymprove.1und1.de/mam_optout_p/"}},be=-1!==["gmx.net","gmx.at","gmx.ch"].indexOf(te()),Ce="https://dl.gmx.net/cookie-transfer/index.html",Pe="https://dl.gmx.at/cookie-transfer/index.html",Ee="https://dl.gmx.ch/cookie-transfer/index.html",xe={},_e=function(e,t,n,o){return new Promise((function(r,i){var a=function(e){try{e.remove()}catch(t){e.parentNode&&e.parentNode.removeChild(e)}},s="".concat(e,"?cName=").concat(t,"&cValue=").concat(n,"&cExpire=").concat(o),c=document.createElement("iframe");c.src=s,c.width="0",c.height="0",c.style.display="none",c.style.visibility="hidden",c.onload=function(){a(c),r()},c.onerror=function(){a(c),i("Failed to transfer cookie: Error loading the iframe.")},window.setTimeout((function(){i("Failed to transfer cookie: Iframe load timed out.")}),3e3),document.body.appendChild(c)}))},Te=function(e,t,n){e&&"string"==typeof e&&t&&"string"==typeof t&&n&&!isNaN(n)&&be&&(xe[e]={cookieValue:t,cookieExpire:n},f("CookieDataTransferService: Pushed new entry into cookie data transfer queue:",xe))},Le=function(e){return n(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){e&&"string"==typeof e||n("PermissionClientCompat pixelPromise: Pixel source not type of string.");var o=new Image(1,1);o.src=e,o.onload=function(){t()},o.onerror=function(){n("PermissionClientCompat pixelPromise: Failed to load service pixel.")}}))]}))}))},Se=function(){function e(e,t){this.monitoringService=e,"number"==typeof t&&p(t)}return e.prototype.applyTcfConsent=function(e,t){return n(this,void 0,void 0,(function(){var r,a,s;return o(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,pe(e)];case 1:return c.sent(),[3,3];case 2:return g("[TcfCompat] applyTcfConsent: updateTCString failed",c.sent()),[2];case 3:try{!function(e){i.set(me,e,{domain:te(),path:"/",expires:390,secure:"https:"===window.location.protocol,sameSite:"https:"===window.location.protocol?"none":void 0}),Te(me,e,390)}(e)}catch(e){null===(a=this.monitoringService)||void 0===a||a.monitorPppEuconsentCookieUpdateFailed(),g("[TcfCompat] applyTcfConsent setTCString failed",e)}try{!function(e){"string"==typeof e&&e.length>0&&(e=e.toUpperCase());try{i.remove(ve)}catch(e){}var t="1";"CONSENT_REQUIRED"===e?t="0":"OK"===e&&(t="2");try{i.set(ve,t,{domain:te(),expires:390,path:"/",secure:"https:"===window.location.protocol,sameSite:"https:"===window.location.protocol?"none":void 0}),Te(ve,t,390)}catch(e){g("[Permission] setIdccCookie: Failed to set the 'idcc' cookie.",e)}}(t)}catch(e){g("[TcfCompat] applyTcfConsent setIdccCookie failed",e)}c.label=4;case 4:return c.trys.push([4,6,,7]),[4,n(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:try{i.remove(ge)}catch(e){}return[4,de("fullConsent")];case 1:e=t.sent()?"3":"1";try{i.set(ge,e,{domain:te(),expires:365,secure:"https:"===window.location.protocol,sameSite:"https:"===window.location.protocol?"none":void 0}),Te(ge,e,365)}catch(e){g("[TCF] setConsentLevel: Failed to set the 'consentLevel' cookie.",e)}return[2]}}))}))];case 5:return c.sent(),[3,7];case 6:return g("[TcfCompat] applyTcfConsent setConsentLevelCookie failed",c.sent()),[3,7];case 7:return c.trys.push([7,9,,10]),[4,n(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return[4,de("publisher",[1,5,6,8,10])];case 1:if(e=n.sent(),t=i.get(he),e&&"OPTOUT"===t)try{i.remove(he),i.remove(he,{domain:te(),path:"/",secure:"https:"===window.location.protocol})}catch(e){}else if(!e&&"OPTOUT"!==t)try{i.set(he,"OPTOUT",{domain:te(),expires:90,path:"/",secure:"https:"===window.location.protocol,sameSite:"https:"===window.location.protocol?"none":void 0}),Te(he,"OPTOUT",90)}catch(e){g("[TCF] updateUiCidCookie: Failed to update the 'ui_cid' cookie.",e)}return[2]}}))}))];case 8:return c.sent(),[3,10];case 9:return g("[TcfCompat] applyTcfConsent setUiCidCookie failed",c.sent()),[3,10];case 10:return c.trys.push([10,12,,13]),[4,n(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,de("tgp")];case 1:return e=t.sent(),[4,(r=e,n(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return e=[],t=te(),r?(e.push(Le(ye.thirdParty)),ye.firstParty[t]?e.push(Le(ye.firstParty[t])):h("[Compat] requestService: Could not determine first party opt-in service for brand domain '".concat(t,"'."))):(e.push(Le(we.thirdParty)),we.firstParty[t]?e.push(Le(we.firstParty[t])):h("[Compat] requestService: Could not determine first party opt-out service for brand domain '".concat(t,"'."))),[4,Promise.all(e).catch((function(e){g("",e)}))];case 1:return n.sent(),[2]}}))})))];case 2:return t.sent(),[3,4];case 3:return g("[TCF] updateNgUserId: Failed to request the services to update 'NGUserID'.",t.sent()),[3,4];case 4:return[2]}var r}))}))];case 11:return c.sent(),[3,13];case 12:return g("[TcfCompat] applyTcfConsent updateNgUserId failed",c.sent()),[3,13];case 13:return c.trys.push([13,15,,16]),[4,n(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return xe&&0!==Object.keys(xe).length?(f("CookieDataTransferService: Starting process of cookie data transfer queue..."),[4,Promise.all(Object.keys(xe).map((function(e){return n(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,(r=e,i=xe[e].cookieValue,a=xe[e].cookieExpire,n(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return"gmx.net"!==(e=te())?[3,2]:[4,Promise.all([_e(Pe,r,i,a),_e(Ee,r,i,a)])];case 1:return t.sent(),[3,4];case 2:return"gmx.at"!==e&&"gmx.ch"!==e?[3,4]:[4,_e(Ce,r,i,a)];case 3:t.sent(),t.label=4;case 4:return[2]}}))})))];case 1:return t.sent(),f("CookieDataTransferService: Transferring cookie data for cookie '".concat(e,"': "),xe[e]),[2]}var r,i,a}))}))})))]):[2,Promise.resolve()];case 1:return e.sent(),f("CookieDataTransferService: Successfully finished processing of cookie data transfer queue."),[2]}}))}))];case 14:return c.sent(),[3,16];case 15:return r=c.sent(),null===(s=this.monitoringService)||void 0===s||s.monitorPppCookieTransferFailed(),g("[TcfCompat] applyTcfConsent processCookieDataTransferQueue failed",r),[3,16];case 16:return[2]}}))}))},e}(),Oe=function(){function e(){var e=this;this.moduleName="PermissionClientApp",this.lifecycleFinished=!1,this.version=G,this.options=null,this.DEFAULT_HANDLER={onShowLayer:function(t){var n=(null==t?void 0:t.cont_layer_name)||(null==t?void 0:t.name)||"unknown";return f(e.moduleName,"DEFAULT_HANDLER.onShowLayer called for layer ".concat(n)),e.layerDisplayed()},onResizeLayer:function(){},getIdentity:function(){return e.getIdentity()},getModel:function(t){return e.getModel(t)},onChange:function(t){return n(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.onChange(t)];case 1:return e.sent(),[2]}}))}))},onComplete:function(){},getTCString:function(){return i.get("euconsent-v2")||""}}}return e.prototype.init=function(r){return n(this,void 0,void 0,(function(){var n,a,s,c;return o(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,2,,4]),!function(){try{i.set(Q,"1");var e=i.get(Q);return i.remove(Q),"1"===e}catch(e){return!1}}())throw new Error(oe.cookies_unsupported);return this.lifecycleFinished=!1,n=r?Object.assign({},r):r,e.validateSettings(n),(n=e.deprecateSettings(n)).accessToken&&-1===(null===(c=n.section)||void 0===c?void 0:c.indexOf("navigator"))&&(n.consentParameters||(n.consentParameters={}),n.consentParameters.accessToken=n.accessToken),this.options=t(t({},this.DEFAULT_HANDLER),n),function(e){try{U=new j({brand:q(e.portal),stage:e.stage,metaData:{section:V(e)}})}catch(e){g("initPppMonitoringService failed",e)}}(this.options),null==U||U.monitorPppLifecycleStarted(),this.coreService||(this.coreService=new ae),a=t(t({},this.options),{onComplete:this.exit.bind(this)}),[4,this.coreService.init(a)];case 1:return o.sent(),f(this.moduleName,"initialize","Module initialized."),[3,4];case 2:return s=o.sent(),g("[".concat(this.moduleName,"] init"),s),[4,this.exit(!1,s)];case 3:return o.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.update=function(e){return n(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),this.coreService?(e&&(this.options.consentParameters=t(t({},this.options.consentParameters||{}),e)),n=t(t({},this.options),{onComplete:this.exit.bind(this)}),[4,this.coreService.init(n)]):[2];case 1:case 3:return o.sent(),[3,4];case 2:return r=o.sent(),g("[".concat(this.moduleName,"] update"),r),[4,this.exit(!1,r)];case 4:return[2]}}))}))},e.prototype.layerDisplayed=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return f(this.moduleName,"layerDisplayed called"),[4,null===(e=this.coreService)||void 0===e?void 0:e.layerDisplayed()];case 1:return t.sent(),[2]}}))}))},e.prototype.getIdentity=function(){return i.get("tp_id")||null},e.prototype.getModel=function(e){var t=e;t||"function"!=typeof this.options.getIdentity||(t=this.options.getIdentity());var n=le(t);return n.identity=t,"function"==typeof this.options.getTCString&&(n.tcString=this.options.getTCString()),n},e.prototype.onChange=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:try{!function(e){if(se){var t=ce(),n=t.findIndex((function(t){return t.identity===e.identity}));n>=0?(f("LocalStorage","storeLocalPermissionModel","updating model for identity ".concat(e.identity)),t[n]=e):(f("LocalStorage","storeLocalPermissionModel","storing new model for identity ".concat(e.identity)),t.push(e));try{window.localStorage.setItem(B,JSON.stringify(t))}catch(e){throw null==U||U.monitorPppLocalStorageWriteFailed(),e}f("LocalStorage","storeLocalPermissionModel","Successfully stored all permission data into local storage.")}else g("[LocalStorage] storeLocalPermissionModel: Storage not available.")}(e)}catch(e){g("[".concat(this.moduleName,"] onChange: error while storing permission model"),e)}if(!e.tcString)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.tcfCompat||(this.tcfCompat=new Se(U)),[4,this.tcfCompat.applyTcfConsent(e.tcString,e.tcStatus)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),g("[".concat(this.moduleName,"] onChange: error while applying TCF status"),t),[3,4];case 4:return[2]}}))}))},e.prototype.exit=function(e,t){return n(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return this.lifecycleFinished?[2]:(this.lifecycleFinished=!0,t&&(n=function(e){void 0===e&&(e="");var t=Object.entries(oe).find((function(t){t[0];var n=t[1];return-1!==e.indexOf(n)}));return t?t[0]:void 0}(null==t?void 0:t.message)),null==U||U.monitorPppLifecycleEnded(e,n),null==U||U.flush(),"function"!=typeof(null===(r=this.options)||void 0===r?void 0:r.onComplete)?[3,2]:[4,this.options.onComplete(e,null==t?void 0:t.message)]);case 1:o.sent(),o.label=2;case 2:return this.destroy(),[2]}}))}))},e.prototype.destroy=function(){this.coreService&&"function"==typeof this.coreService.destroy&&this.coreService.destroy(),this.coreService=null,this.options=null,delete this.coreService,delete this.options},e.validateSettings=function(e){var t=oe.settings_invalid;if(!e)throw new Error("".concat(t,": Missing settings object!"));if(!e.portal||"string"!=typeof e.portal)throw new Error("".concat(t,": Required setting 'portal' must have a string value!"));if(!J.includes(e.portal))throw new Error("Invalid value ".concat(e.portal," for setting 'portal': Must be one of ").concat(J.join(", "),"!"));if(!e.category||"string"!=typeof e.category)throw new Error("".concat(t,": Required setting 'category' must have a string value!"));if(e.section&&"string"!=typeof e.section)throw new Error("".concat(t,": Optional setting 'section' must have a string value!"));if(e.forcePermissionLayer&&"string"!=typeof e.forcePermissionLayer)throw new Error("".concat(t,": Optional setting 'forcePermissionLayer' must have a string value!"));if(e.touchpointReference&&0!==e.touchpointReference.indexOf("http"))throw new Error("".concat(t,": Optional setting 'touchpointReference' must start with 'http://' or 'https://'!"));if(e.accessToken){if("string"!=typeof e.accessToken)throw new Error("".concat(t,": Optional setting 'accessToken' must have a string value!"));if(0===e.accessToken.indexOf("Bearer"))throw new Error("".concat(t,": Optional setting 'accessToken' contains the 'Bearer ' prefix, remove it, as it will be prepended by PPP!"));if(!e.xUIApp||"string"!=typeof e.xUIApp)throw new Error("".concat(t,": Optional setting 'accessToken' given, but related / required 'xUIApp' setting is missing or invalid!"));if(!e.touchpointName||"string"!=typeof e.touchpointName)throw new Error("".concat(t,": Optional setting 'accessToken' given, but related / required 'touchpointName' setting is missing or invalid!"));if(!e.touchpointReference||"string"!=typeof e.touchpointReference)throw new Error("".concat(t,": Optional setting 'accessToken' given, but related / required 'touchpointReference' setting is missing or invalid!"))}},e.deprecateSettings=function(e){return["permissionGroup"].forEach((function(t){e[t]&&(h("PermissionClientApp: The '".concat(t,"' setting is no longer supported and will be ignored.")),delete e[t])})),["getModel"].forEach((function(t){e[t]&&h("PermissionClientApp: The '".concat(t,"' setting is deprecated and will be removed in the future."))})),e.forcePermissionLayer&&"tcf_v2"!==e.forcePermissionLayer&&"onetrust"!==e.forcePermissionLayer&&(h("The only permitted values for 'forcePermissionLayer' are 'tcf_v2' and 'onetrust'."),delete e.forcePermissionLayer),e},e}();"Node"in window&&void 0===Node.prototype.contains?Node.prototype.contains=e:"HTMLElement"in window&&void 0===HTMLElement.prototype.contains&&(document.contains=HTMLElement.prototype.contains=e),void 0===ue&&(ue=!1),p(function(e){if(void 0===e&&(e=!1),"true"===window.localStorage.getItem("PPP_DEBUG"))return c.debug;switch(z){case"DEVELOPMENT":return c.debug;case"PRODUCTION":return c.error;case"QA":return e?c.debug:c.warn;default:return c.none}}(ue));var Ne=new Oe;if(window.PermissionClient&&window.PermissionClient.q){var Ie=window.PermissionClient.q;window.PermissionClient=Ne,f("PermissionClient async startup: Applying queued init arguments"),Ne.init.apply(Ne,[].slice.call(Ie))}return Ne}();//# sourceMappingURL=permission-client.js.map
