/*! For license information please see tracklib.min.js.LICENSE.txt */
var TrackLib;!function(){var t={8796:function(t,e){"use strict";e.__esModule=!0,e.features=void 0;var r={touchevents:function(){var t=!1;return("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(t=!0),t}};e.features=r},1080:function(t,e,r){"use strict";e.__esModule=!0,e.tcf2Filter=e.PERSONAL_DATA_ATTRIBUTES=void 0;var a=r(5813);e.PERSONAL_DATA_ATTRIBUTES=["reso_scr_w","reso_scr_h","reso_scr_ppi","corr_","hid","reso_win_w","reso_win_h","cont_page_id","cont_lvts","cont_segment","cont_variant","size_","soft_variant","campaign"],e.tcf2Filter=function(t,r,n){"pakpie"===t.key&&((0,a.getTcfConsent)("brainTracking",2)||Object.keys(r).forEach((function(t){e.PERSONAL_DATA_ATTRIBUTES.forEach((function(e){0===t.indexOf(e)&&delete r[t]}))})))}},9525:function(t,e,r){"use strict";e.__esModule=!0,e.imageGenerator=void 0;var a=r(3155),n=r(8153),i=function(t){return a.util.createUrl(t)},o=function(t){var e=new Image(1,1);return new Promise((function(r,a){e.addEventListener("load",(function(){r("load")})),e.addEventListener("error",(function(){a("error")})),e.addEventListener("abort",(function(){a("abort")})),e.src=t,n.logger.log("img","request",t)}))},s={key:"img",run:function(t){var e=i(t);return o(e)},getValue:function(t){return i(t)},track:function(t){return o(t)}};e.imageGenerator=s},3426:function(t,e,r){"use strict";e.__esModule=!0,e.imagePakpieGenerator=void 0;var a=r(3155),n=r(8153),i=function(t){var e,r=0,n=a.util.createUrl(t).split("?");for(n[1]+="&signature=",e=0;e<n[1].length;e++)r+=n[1].charCodeAt(e);return r=r%5843+9127,n[1]+=r,n.join("?")},o=function(t){var e=new Image(1,1),r=new Promise((function(r,a){e.addEventListener?(e.addEventListener("load",(function(){n.logger.log("img_pakpie","loaded",t),r("load")})),e.addEventListener("error",(function(){n.logger.log("img_pakpie","error",t),a("error")})),e.addEventListener("abort",(function(){n.logger.log("img_pakpie","abort",t),a("abort")})),e.src=t,n.logger.log("img_pakpie","request",t)):(e.src=t,n.logger.log("img_pakpie","request",t),r("unknown"))}));return r.catch((function(){})),r},s={key:"img_pakpie",getValue:function(t){return i(t)},track:function(t){return o(t)},run:function(t){var e=i(t);return o(e)}};e.imagePakpieGenerator=s},7911:function(t,e,r){"use strict";e.__esModule=!0,e.objectGenerator=void 0;var a=r(3155),n=r(8153),i={key:"obj",run:function(t){return new Promise((function(e){a.util.isObject(t)&&a.util.isObject(t.obj)&&t.methodName&&a.util.isFunction(t.obj[t.methodName])&&(t.obj[t.methodName](t.data),n.logger.log("obj","request",t)),e(!0)}))}};e.objectGenerator=i},8983:function(t,e,r){"use strict";e.__esModule=!0;var a=r(5043);t.exports=a.TrackLib},7544:function(t,e,r){"use strict";e.__esModule=!0,e.MultiLayer=void 0;var a=r(3155),n=r(6530),i=function(){function t(){this.layers={},this.tree={}}return t.prototype.copyTree=function(t,e,r){var a=r.shift();return r.length?!!Object.prototype.hasOwnProperty.call(e,a)&&(Object.prototype.hasOwnProperty.call(t,a)||(t[a]={}),this.copyTree(t[a],e[a],r)):(t[a]=e[a],!0)},t.prototype.addLayer=function(t){return!Object.prototype.hasOwnProperty.call(this.layers,t)&&(this.layers[t]={},!0)},t.prototype.hasLayer=function(t){return Object.prototype.hasOwnProperty.call(this.layers,t)},t.prototype.getLayer=function(t){return Object.prototype.hasOwnProperty.call(this.layers,t)?this.layers[t]:null},t.prototype.findLayer=function(t,e,r){for(var a,n,i=0,o=t;i<o.length;i++)if(a=o[i],this.getLayerValue(a,e)===r){n=this.layers[a];break}return n},t.prototype.getValue=function(t,e,r){var n;return e=a.util.ensureArray(e,"."),n=this.walkTree(t,e),a.util.isUndefined(n)&&(n=r),n},t.prototype.setValue=function(t,e,r,n){e=a.util.ensureArray(e,"."),this.walkTree(t,e)[r]=n},t.prototype.getLayerValue=function(t,e,r){var a=r;return Object.prototype.hasOwnProperty.call(this.layers,t)&&(a=this.getValue(this.layers[t],e,r)),a},t.prototype.setLayerValue=function(t,e,r,a){Object.prototype.hasOwnProperty.call(this.layers,t)&&this.setValue(this.layers[t],e,r,a)},t.prototype.merge=function(t,e){var r,n={};for(t=a.util.ensureArray(t),r=0;r<t.length;r++)a.util.isObject(t[r])?n=a.util.mergeDeep(n,t[r][e]):Object.prototype.hasOwnProperty.call(this.layers,t[r])&&(n=a.util.mergeDeep(n,this.getLayerValue(t[r],e)));return n},t.prototype.getChildren=function(t){return Object.prototype.hasOwnProperty.call(this.tree,t)?this.tree[t].children:{}},t.prototype.linkLayer=function(t,e){var r=!1;return Object.prototype.hasOwnProperty.call(this.layers,t)&&Object.prototype.hasOwnProperty.call(this.layers,e)&&(Object.prototype.hasOwnProperty.call(this.tree,t)||(this.tree[t]={parents:{},children:{}}),Object.prototype.hasOwnProperty.call(this.tree,e)||(this.tree[e]={parents:{},children:{}}),this.tree[t].children[e]=this.layers[e],this.tree[e].parents[t]=this.layers[t],r=!0),r},t.prototype.setLayer=function(t,e){return!!this.addLayer(t)&&(this.layers[t]=Object.assign(this.layers[t],n(e)),!0)},t.prototype.walkTree=function(t,e){return e.length&&!a.util.isUndefined(t)?this.walkTree(t[e[0]],e.slice(1)):t},t}();e.MultiLayer=i},865:function(t,e,r){"use strict";e.__esModule=!0,e.brainTrackingSystem=void 0;var a=r(3155),n=r(8796),i={key:"brain",parameter:{name:{need:{properties:["system.section_prefix"],parameter:["trackingtype","section"]},calc:function(t){return[t.properties.system.section_prefix,t.parameter.trackingtype,t.parameter.section].join(".")}},timestamp:{alias:"mts"},registrationcountry:{alias:"country"},trackingtype:{alias:"type",need:{properties:["system.mapping"]},calc:function(t,e){if(t.properties.system){var r,a=t.properties.system;if(e.set&&"string"==typeof e.set){var n=e.set;r=Object.prototype.hasOwnProperty.call(a.mapping.trackingtype,n)?a.mapping.trackingtype[n]:n}return r}}},tif:{need:{runtime:["activeSystems"]},calc:function(t){return Object.prototype.hasOwnProperty.call(t.runtime.activeSystems,"tif")?1:0}},reso_scr_w:{alias:"rsw"},reso_scr_h:{alias:"rsh"},reso_win_w:{alias:"vpw"},reso_win_h:{alias:"vph"},reso_scr_ppi:{},touch:{cache:!0,calc:function(){return n.features.touchevents()}},label:{need:{properties:["system.label_prefix"]},calc:function(t,e){var r=t.properties.system,n={};return e.set&&a.util.isObject(e.set)&&(n=a.util.prefixObject(e.set,r.label_prefix)),n}}},properties:{lib:{active:!1,generator:"img",useparameter:function(t){return Object.keys(t.parameter)}},system:{label_prefix:"n_",section_prefix:"brain",mapping:{trackingtype:{cl:"click",ev:"event"}}}}};e.brainTrackingSystem=i},9179:function(t,e,r){"use strict";e.__esModule=!0,e.gtmTrackingSystem=void 0;var a=r(5813),n={key:"gtm",parameter:{event:{fixed:"tracklibEvent"},section:{alias:"tracklibVariable"}},properties:{lib:{active:!1,generator:"obj",generatorAdapter:function(t,e){var r=t.system;return[{obj:window[r.gtm_global],methodName:"push",data:e}]},useparameter:function(t){return Object.keys(t.parameter)},hasConsent:function(){return(0,a.getTcfConsent)("googleAnalyticsTracking")}},system:{gtm_global:{set:"dataLayer"}}}};e.gtmTrackingSystem=n},2387:function(t,e){"use strict";e.__esModule=!0,e.getLibCampaign=void 0;var r={},a={hashtag:function(){if(document.location.hash){var t=document.location.hash.slice(1);if("."===t[0]){t=t.split("?")[0].split("&")[0];var e=void 0;try{e=decodeURIComponent(t)}catch(t){}return e}}return null},mediacode:function(){return n("mc")},kid:function(){var t=n("kid");return t||(t=function(t){if(!t)return null;var e;try{e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))}catch(t){}return e||null}("cookieKID")),t}};function n(t){var e,a,n,i,o=document.location.search.slice(1);if(o){e=(o=o.split("#")[0]).split("&");for(var s=0;s<e.length;s++)n=(a=e[s].split("="))[0].toLowerCase(),i=a[1]?a[1]:null,n&&i&&(r[n]=i)}return r[t]?r[t]:null}e.getLibCampaign=function(){for(var t,e,r=[],n=0,i=["mediacode","hashtag","kid"];n<i.length;n++)(e=a[t=i[n]]?a[t]():null)&&r.push("".concat(t,":").concat(e));return r.length?"#"+r.join("#"):null}},5813:function(t,e){"use strict";e.__esModule=!0,e.getTcfConsent=void 0,e.getTcfConsent=function(t,e){void 0===e&&(e=2);var r=!1;try{window.__tcfapi("updateTCString",2,(function(){})),window.__tcfapi("getPermission",e,(function(t){r=t}),t)}catch(t){return r}return r}},64:function(t,e,r){"use strict";e.__esModule=!0,e.libSystem=void 0;var a=r(2387),n=r(3155),i=r(5813),o=["1und1.de","1and1.com","gmx.at","gmx.ch","gmx.net","gmx.com","gmx.co.uk","gmx.es","gmx.fr","mail.com","web.de"],s={"1und1.de":"/1und1/1und1/s","1and1.com":"/1and1/1and1/s","gmx.at":"/gmx/gmx/s","gmx.ch":"/gmx/gmx/s","gmx.net":"/gmx/gmx/s","gmx.com":"/gmx/gmx-com/s","gmx.co.uk":"/gmx/gmx-com/s","gmx.es":"/gmx/gmx-com/s","gmx.fr":"/gmx/gmx-com/s","mail.com":"/mailcom/mailcom/s","web.de":"/webde/webde/s"},c="/wa/t.gif",u={"1und1":"1und1.de".concat(c),"1und1de":"1und1.de".concat(c),"1and1":"1and1.com".concat(c),"1and1com":"1and1.com".concat(c),gmx:"gmx.net".concat(c),gmxat:"gmx.net".concat(c),gmxch:"gmx.net".concat(c),gmxde:"gmx.net".concat(c),gmxnet:"gmx.net".concat(c),gmxcom:"gmx.com".concat(c),gmxcouk:"gmx.co.uk".concat(c),gmxes:"gmx.es".concat(c),gmxfr:"gmx.fr".concat(c),mailcom:"mail.com".concat(c),webde:"web.de".concat(c)},l={},p={mc:!0,ac:!0,domainName:!0,isCH:!0,is1Reg:!0,isInapp:!0,q:!0,cd:!0,ved:!0},f=["browserswitch.decision.end","general.start"],h={key:"lib",parameter:{timestamp:{calc:function(){return(new Date).getTime()}},reso_scr_w:{cache:!0,calc:function(){return window.screen.width}},reso_scr_h:{cache:!0,calc:function(){return window.screen.height}},reso_scr_ppi:{cache:!0,calc:function(){var t=0;if(window.matchMedia){var e=function(t){return!0===matchMedia("(max-resolution: "+t+"dpi)").matches},r=0,a=96,n=e(r),i=a-r,o=void 0,s=0;if(n!==e(a))for(;i>1;){if(n!==e(o=r+Math.floor(i/2))?a=o:r=o,i=a-r,++s>12){t=-1;break}t=a}}return t}},soft_name:{},soft_version:{},soft_variant:{},brand:{defaultValue:"unknown"},registrationcountry:{},hid:{},product:{},reso_win_w:{cache:!1,calc:function(){return window.innerWidth}},reso_win_h:{cache:!1,calc:function(){return window.innerHeight}},section:{},trackingtype:{},eventposition:{},pageurl:{cache:!1,need:{parameter:["hid","section"]},calc:function(t){var e=t&&t.parameter&&t.parameter.hid?t.parameter.hid:null,r=t&&t.parameter&&t.parameter.section?t.parameter.section:null,a="string"==typeof r&&-1!==f.indexOf(r);if(e&&!a)return null;var i=n.util.sanitizeUrl(document.location.href,p);return i.length?i:null}},referrer:{},referrer_calc:{cache:!0,need:{parameter:["referrer"]},alias:"referrer",calc:function(t){if(t&&t.parameter&&"string"==typeof t.parameter.referrer)return t.parameter.referrer;if(!document.referrer)return null;var e=n.util.sanitizeUrl(document.referrer,p);return e.length?e:null}},campaign:{calc:function(){return(0,a.getLibCampaign)()}},result:{},profileblocked:{cache:!1,calc:function(){return(0,i.getTcfConsent)("brainTracking")?0:1}},environment:{},lib_name:{fixed:"@poseidon/tracklib"},lib_version:{fixed:"4.7.3"},visit_calc:{}},properties:{lib:{useparameter:function(t,e){var r=Object.keys(e.systemParameter);return Object.prototype.hasOwnProperty.call(e.properties.lib,"addparameter")&&(r=r.concat(e.properties.lib.addparameter)),r},addparameter:[],prefixparameter:["corr_","posi_","cont_","resu_","coun_","size_","time_","sett_","perm_"],generatorAdapter:function(t,e){var r,a,n,i="string"==typeof e.brand?e.brand:null,o="number"==typeof e.visit_calc?e.visit_calc:void 0,s="number"==typeof e.sett_nct?e.sett_nct:void 0,c=Object.prototype.hasOwnProperty.call(t.lib,"stage")&&"string"==typeof t.lib.stage?t.lib.stage:"live";return t.system.base_url?r=t.system.base_url:"function"==typeof t.lib.getBrainUrl&&(r=t.lib.getBrainUrl(i,c,o,s)),[{baseUrl:r,query:(a=e,n={},Object.keys(g).forEach((function(t){a[t]&&(n[t]=g[t](a[t]))})),Object.assign({},a,n))}]},getBrainUrl:function(t,e,r,a){if(void 0===r&&(r=0),void 0===a&&(a=0),l["".concat(t,"-").concat(e,"-").concat(r,"-").concat(a)])return l["".concat(t,"-").concat(e,"-").concat(r,"-").concat(a)];var i,p=("qa"===e?"wa-qa":"wa")+".";p="qa"!==e&&1===a?"":p;var f=n.util.getDomain(location.hostname),h="qa"!==e&&1===a?"nct.ui-portal.de":f;if(1===r&&-1!==o.indexOf(f))i="".concat(h).concat(s[f]);else if(-1!==o.indexOf(f))i="".concat(h).concat(c);else{if(!u[t])return"";i=1===a?"".concat(h).concat(c):u[t]}return l["".concat(t,"-").concat(e,"-").concat(r,"-").concat(a)]="https://".concat(p).concat(i),l["".concat(t,"-").concat(e,"-").concat(r,"-").concat(a)]},protocols:["http:","https:"]}}};e.libSystem=h;var g={campaign:function(t){return"#"+t.split("#").filter((function(t){return!!t})).map((function(t){return t.split(":").length>1&&(t=t.split(":")[1]),t.replace(/@/g,"_")})).join("#")}}},8903:function(t,e){"use strict";e.__esModule=!0,e.pakpieTrackingSystem=void 0,e.pakpieTrackingSystem={key:"pakpie",parameter:{attributeset:{fixed:2}},properties:{lib:{active:!0,generator:"img_pakpie"}}}},817:function(t,e){"use strict";e.__esModule=!0,e.getConversionParams=e.getMatchingTld=e.getPageIdentifierFromUrl=e.tifTrackingSystem=void 0;var r=["at","ch","de","co.uk","com","es","fr","net"],a={net:"de"},n=["evtid","mediaID","mpID","conversionData"],i=["region"],o={brand:"site",pageidentifier:"sc",hid:"haID"},s={key:"tif",parameter:{pageidentifier:{need:{parameter:["section","product","pageurl"],properties:["system.brain_tif_mapping","system.prefix","system.mobile_os","system.get_product_name"]},calc:function(t){var e=t.parameter.section,r=t.properties.system,a=r.brain_tif_mapping;if("section"===a&&"string"==typeof e){var n=r.mobile_os,i=r.prefix,o=r.get_product_name,s="string"==typeof t.parameter.product?parseInt(t.parameter.product):t.parameter.product,c=void 0;return void 0!==s&&"function"==typeof o&&(c=o(s)),function(t,e,r,a){var n=t.split("."),i=[],o=!1;return e&&i.push(e),r&&i.push(r),n.shift(),a&&i.push(a),"view"===n[n.length-1]&&(n.pop(),o=!0),i=i.concat(n),0===n.length&&o&&i.push("index"),i.join("/")}(e,n,i,c)}return"url"===a?(n=r.mobile_os,i=r.prefix,p(window.location.pathname,n,i)):"string"==typeof e?e.split(".").join("/"):e}},brand:{},region:{calc:function(){var t=f(window.location.hostname);return(t=a[t]||t)?t.replace(".",""):void 0}},hid:{},crx:{},evtid:{set:919},mediaID:{set:1015},mpID:{set:4},conversionData:{}},properties:{lib:{active:!1,generator:"obj",generatorAdapter:function(t,e){var r,a={obj:t.system.tif_container,methodName:"track",data:g(e)};return void 0!==a.data.product&&(a.data.ul=a.data.product,delete a.data.product),t.system.fire_conversion&&(r={obj:t.system.tif_container,methodName:"fire_conversion",data:h(e)}).data.conversionData&&(r.data.conversionData.split("&").forEach((function(t){var e=t.split("=");2===e.length&&(r.data[e[0]]=e[1])})),delete r.data.conversionData),t.system.fire_conversion?[a,r]:[a]},useparameter:function(t){var e=Object.keys(t.parameter);return e.push("product"),e}},system:{tif_container:{},brain_tif_mapping:"section",prefix:null,mobile_os:null,product_for_userlevel:null}}};e.tifTrackingSystem=s;var c=/^\//,u=/\/$/,l=/\.htm(l)?$/;function p(t,e,r){var a=[];return e&&a.push(e),r&&a.push(r),a.push(t.replace(c,"").replace(l,"").replace(u,"")),a.join("/")}function f(t){var e=r.filter((function(e){return new RegExp("".concat(e,"$")).test(t)}));return e?e[0]:null}function h(t){var e={};Object.keys(o).forEach((function(r){e[o[r]]=t[r]}));var r=n.concat(i);return Object.keys(t).filter((function(t){return-1!==r.indexOf(t)})).forEach((function(r){return e[r]=t[r]})),e}function g(t){var e=Object.assign({},t);return n.forEach((function(t){delete e[t]})),e}e.getPageIdentifierFromUrl=p,e.getMatchingTld=f,e.getConversionParams=h},4625:function(t,e,r){"use strict";e.__esModule=!0,e.TrackBuffer=e.BufferEvents=void 0;var a=r(3155),n=r(8153),i={ready:"ready"};e.BufferEvents=i;var o=function(){function t(t){this.options=t,this.storage=null,this.buffer=null,this.listener=[],this.active=a.util.localStorageAvailable(),this.active&&(this.storage=localStorage),this.ensureBuffer()}return t.prototype.addListener=function(t){this.listener.push(t),this.checkReady()},t.prototype.add=function(t,e){var r={created:(new Date).getTime(),value:t,generator:e,meta:{tries:1}};this.buffer.push(r),this.saveBuffer()},t.prototype.complete=function(t){this.remove(t),this.saveBuffer()},t.prototype.error=function(t){this.remove(t),t.meta.tries<this.options.retry&&this.retry(t),this.saveBuffer()},t.prototype.get=function(t){return void 0===t&&(t=0),this.ensureBuffer(),t<this.buffer.length?this.buffer[t]:null},t.prototype.isActive=function(){return this.active},t.prototype.retry=function(t){t.meta.tries++,this.buffer.push(t)},t.prototype.remove=function(t){var e=this.getIndex(t);a.util.isNumber(e)&&this.buffer.splice(e,1)},t.prototype.emit=function(t,e){var r;for(void 0===e&&(e={}),r=0;r<this.listener.length;r++)this.listener[r](t,e)},t.prototype.checkReady=function(){this.buffer.length>0&&this.emit(i.ready)},t.prototype.getIndex=function(t){var e,r=null;for(this.ensureBuffer(),e=0;e<this.buffer.length;e++)if(this.buffer[e].value===t.value){r=e;break}return r},t.prototype.ensureBuffer=function(){null===this.buffer&&(this.buffer=this.loadBuffer(),null===this.buffer&&(this.buffer=[]))},t.prototype.saveBuffer=function(){var t;return!!this.active&&(this.ensureBuffer(),t=JSON.stringify(this.buffer),this.storage.setItem(this.options.key,t),this.checkReady(),n.logger.log("storage","write",this.buffer),!0)},t.prototype.loadBuffer=function(){var t,e=null;if(this.storage){if(t=this.storage.getItem(this.options.key))try{t=JSON.parse(t)}catch(t){}e=a.util.isArray(t)?t:[]}return e},t}();e.TrackBuffer=o},3109:function(t,e,r){"use strict";e.__esModule=!0,e.TrackingData=void 0;var a=r(7544),n=r(3155),i=function(){function t(){this.trackData=new a.MultiLayer,this.propertiesCache={},this.filters={}}return t.unifyParameters=function(t){var e={key:null,properties:t.properties||{},parameter:{}};return t.parameter&&Object.keys(t.parameter).forEach((function(r){var a=t.parameter[r];e.parameter[r]=n.util.isObject(a)?a:{set:a}})),e},t.getPresetKey=function(e){return e+t.PRESET_AFFIX},t.prototype.getData=function(){return this.trackData},t.prototype.addFilter=function(t,e){this.filters[t]=e},t.prototype.runFilter=function(t,e,r){var a;for(a in this.filters)this.filters[a](t,e,r)},t.prototype.preset=function(e){for(var r in e)if(this.trackData.hasLayer(r)){var a=t.unifyParameters(e[r]);this.trackData.setLayer(t.getPresetKey(r),a)}},t.prototype.getProperties=function(e){return this.propertiesCache[e]||(this.propertiesCache[e]={system:this.trackData.merge([e,t.getPresetKey(e)],["properties","system"]),lib:this.trackData.merge(["lib",e,t.getPresetKey("lib"),t.getPresetKey(e)],["properties","lib"])}),this.propertiesCache[e]},t.prototype.setCache=function(e,r,a){var n=["lib",e,t.getPresetKey("lib"),t.getPresetKey(e)],i=this.trackData.findLayer(n,["parameter",r,"cache"],!0);i&&this.trackData.setValue(i,["parameter",r],"cache_value",a)},t.prototype.getAllParameter=function(e,r){void 0===r&&(r={parameter:null,properties:null});var a=["lib",e.key,t.getPresetKey("lib"),t.getPresetKey(e.key),r];return this.trackData.merge(a,"parameter")},t.PRESET_AFFIX="_preset",t}();e.TrackingData=i},9354:function(t,e){"use strict";e.__esModule=!0,e.TrackingGenerators=void 0;var r=function(){function t(t){this.trackData=t,this.trackData.getData().addLayer("_generator")}return t.getGeneratorKey=function(e){return e+t.GENERATOR_AFFIX},t.prototype.add=function(e){var r=t.getGeneratorKey(e.key);this.trackData.getData().setLayer(r,e)&&this.trackData.getData().linkLayer("_generator",r)},t.prototype.get=function(e){var r=t.getGeneratorKey(e);return this.trackData.getData().getLayer(r)},t.GENERATOR_AFFIX="_generator",t}();e.TrackingGenerators=r},5043:function(t,e,r){"use strict";e.__esModule=!0,e.TrackLib=void 0;var a=r(1974),n=r(3109),i=r(1136),o=r(9354),s=r(4334),c=r(8153),u=r(64),l=r(865),p=r(8903),f=r(817),h=r(9179),g=r(9525),y=r(3426),m=r(7911),d=r(1080),v=function(){function t(t,e){void 0===e&&(e={}),this.trackOptions=new a.TrackOptions(e),this.trackData=new n.TrackingData,this.trackSystems=new i.TrackingSystems(this.trackData),this.trackGenerator=new o.TrackingGenerators(this.trackData),this.addTrackingSystem(u.libSystem),this.addTrackingSystem(l.brainTrackingSystem),this.addTrackingSystem(p.pakpieTrackingSystem),this.addTrackingSystem(f.tifTrackingSystem),this.addTrackingSystem(h.gtmTrackingSystem),this.addTrackingGenerator(g.imageGenerator),this.addTrackingGenerator(y.imagePakpieGenerator),this.addTrackingGenerator(m.objectGenerator),this.preset(t),this.addFilter("brain-tcf-2.0",d.tcf2Filter),this.tracker=new s.Tracker(this.trackData,this.trackSystems,this.trackGenerator,this.trackOptions)}return t.prototype.preset=function(t){return this.trackData.preset(t),this},t.prototype.addFilter=function(t,e){this.trackData.addFilter(t,e)},t.prototype.addTrackingSystem=function(t){return this.trackSystems.add(t),this},t.prototype.getTrackingSystem=function(t){return this.trackSystems.get(t)},t.prototype.getTrackingData=function(t){var e={},r=this.getTrackingSystem(t);return r&&(e=this.tracker.getTrackParameter(r)),e},t.prototype.addTrackingGenerator=function(t){return this.trackGenerator.add(t),this},t.prototype.track=function(t,e){return void 0===e&&(e={}),this.tracker.run(t,e),this},t.prototype.getLogger=function(){return c.logger},t}();e.TrackLib=v},8153:function(t,e){"use strict";e.__esModule=!0,e.logger=e.TrackingLogger=void 0;var r=function(){function t(){this.observers=[]}return t.prototype.registerObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){this.observers.splice(this.observers.indexOf(t),1)},t.prototype.notifyObservers=function(t){var e;for(e=0;e<this.observers.length;e++)this.observers[e].update(t)},t.prototype.log=function(t,e,r){this.notifyObservers({component:t,action:e,data:r})},t}();e.TrackingLogger=r;var a=new r;e.logger=a,a.registerObserver({update:function(t){}})},1974:function(t,e,r){"use strict";e.__esModule=!0,e.TrackOptions=void 0;var a=r(3155),n=r(8153),i={buffer:{read:!1,write:!1,retry:3,key:"trlbuf",container:"html5"}},o=function(){function t(t){this.options=a.util.mergeDeep(i,t),t.observer&&a.util.isObject(t.observer)&&a.util.isFunction(t.observer.update)&&n.logger.registerObserver(t.observer)}return t.prototype.get=function(){return this.options},t}();e.TrackOptions=o},1136:function(t,e){"use strict";e.__esModule=!0,e.TrackingSystems=void 0;var r=function(){function t(t){this.trackData=t}return t.prototype.add=function(t){this.trackData.getData().setLayer(t.key,t)&&"lib"!==t.key&&this.trackData.getData().linkLayer("lib",t.key)},t.prototype.get=function(t){return this.trackData.getData().getLayer(t)},t}();e.TrackingSystems=r},4334:function(t,e,r){"use strict";e.__esModule=!0,e.Tracker=void 0;var a=r(3109),n=r(3155),i=r(4625),o=r(6530),s=function(){function t(t,e,r,a){var n=this;this.trackData=t,this.trackSystems=e,this.trackGenerators=r,this.trackOptions=a,this.trackBuffer=new i.TrackBuffer(this.trackOptions.get().buffer),this.trackOptions.get().buffer.read&&this.trackBuffer.addListener((function(t,e){return n.bufferListener(t,e)}))}return t.prototype.run=function(t,e){var r=this;this.setCallData(t,e);var a=this.getActiveTrackingSystems();Object.keys(a).forEach((function(t){var i=a[t],s=[r.getTrackParameter(i)],c=o(r.trackData.getProperties(i.key));c.system=Object.assign(c.system,e[t]);var u=r.trackGenerators.get(c.lib.generator);u&&(c.lib.generatorAdapter&&n.util.isFunction(c.lib.generatorAdapter)&&(s=c.lib.generatorAdapter(c,s[0])),s.forEach((function(t){if(r.trackOptions.get().buffer.write&&u.getValue){var e=u.getValue(t);r.trackBuffer.add(e,u.key)}else u.run(t)})))}))},t.prototype.getTrackParameter=function(t){var e,r,a,i=this,o={},s=this.trackData.getProperties(t.key),c=this.callData,u=n.util.mergeDeep({},this.callData);for(c.systemParameter=this.trackData.getData().merge(["lib",t.key],"parameter"),c.allParameter=this.trackData.getAllParameter(t,c),c.properties=this.trackData.getProperties(t.key),e=this.trackData.getData().getValue(s,["lib","useparameter"],[]),n.util.isFunction(e)&&(e=e(t,c)),r=0;r<e.length;r++)a=this.resolveParameter(t,e[r],c),n.util.isObject(a)&&(o=Object.assign(o,a));return this.trackData.getData().getValue(s,["lib","prefixparameter"],[]).forEach((function(e){Object.keys(c.allParameter).filter((function(t){return 0===t.indexOf(e)})).forEach((function(e){var r=i.resolveParameter(t,e,c);o=Object.assign(o,r)}))})),this.trackData.runFilter(t,o,u),o},t.prototype.resolveParameter=function(t,e,r,a){void 0===a&&(a={});var i,o={},s={parameter:{},properties:{}},c=r.allParameter[e];if(a=Object.assign({alias:!0},a),c.cache&&Object.prototype.hasOwnProperty.call(c,"cache_value"))i=c.cache_value;else switch(c.need&&n.util.isObject(c.need)&&(s=this.resolveNeededValues(t,c.need,r)),!0){case Object.prototype.hasOwnProperty.call(c,"fixed"):i=c.fixed;break;case Object.prototype.hasOwnProperty.call(c,"calc")&&n.util.isFunction(c.calc):i=c.calc(s,c,t);break;case Object.prototype.hasOwnProperty.call(c,"set"):i=c.set}if(n.util.isObject(i))o=i;else{var u=a.alias&&c.alias?c.alias:e;n.util.isScalar(i)?o[u]=i:Object.prototype.hasOwnProperty.call(c,"defaultValue")&&n.util.isScalar(c.defaultValue)&&(o[u]=c.defaultValue)}return!c.cache||Object.prototype.hasOwnProperty.call(c,"cache_value")||n.util.isUndefined(i)||this.trackData.setCache(t.key,e,i),o},t.prototype.getActiveTrackingSystems=function(){var t,e,r,a={},i=this.trackData.getData().getChildren("lib");for(t in i)if(e=!1,r=!1,!i[t].properties||!i[t].properties.lib||"function"!=typeof i[t].properties.lib.hasConsent||i[t].properties.lib.hasConsent()){if(this.callData.properties[t]&&n.util.isBoolean(this.callData.properties[t].active))e=this.callData.properties[t].active;else{var o=this.trackData.getProperties(t);!0===this.trackData.getData().getValue(o,["lib","active"])&&(e=!0)}if(this.callData.properties[t]&&n.util.isArray(this.callData.properties[t].protocols))r=-1!==this.callData.properties[t].protocols.indexOf(location.protocol);else{o=this.trackData.getProperties(t);var s=this.trackData.getData().getValue(o,["lib","protocols"]);n.util.isArray(s)&&(r=-1!==s.indexOf(location.protocol))}e&&r&&(a[t]=i[t])}return a},t.prototype.setCallData=function(t,e){this.callData={properties:null,parameter:null,allParameter:null,systemParameter:null},"string"==typeof t&&(t={section:t}),this.callData.parameter=t,this.callData.properties=e;var r=a.TrackingData.unifyParameters(this.callData);this.callData.parameter=Object.assign({},r.parameter)},t.prototype.bufferListener=function(t,e){switch(t){case i.BufferEvents.ready:this.writeFromBuffer()}},t.prototype.writeFromBuffer=function(){var t,e=this,r=this.trackBuffer.get();r&&(t=this.trackGenerators.get(r.generator))&&t.track(r.value).then((function(){e.trackBuffer.complete(r)})).catch((function(){e.trackBuffer.error(r)}))},t.prototype.resolveNeededValues=function(t,e,r){var a,i,o,s,c={parameter:{},properties:{}},u=!0;if(e.properties&&n.util.isArray(e.properties))for(a=this.trackData.getProperties(t.key),c.properties={},o=0;o<e.properties.length;o++)u=u&&this.trackData.getData().copyTree(c.properties,a,n.util.ensureArray(e.properties[o],"."));if(e.parameter&&n.util.isArray(e.parameter))for(c.parameter={},o=0;o<e.parameter.length;o++)i=this.resolveParameter(t,e.parameter[o],r,{alias:!1}),c.parameter=Object.assign(c.parameter,i);if(e.runtime&&n.util.isArray(e.runtime))for(c.runtime={},o=0;o<e.runtime.length;o++)s=e.runtime[o],c.runtime[s]=this.runtimeHelper(s);return u||(c=null),c},t.prototype.runtimeHelper=function(t){var e;switch(t){case"activeSystems":e=this.getActiveTrackingSystems()}return e},t}();e.Tracker=s},3155:function(t,e){"use strict";e.__esModule=!0,e.util=void 0;var r=function(t,e){var a;if(i.isObject(t)&&i.isObject(e))for(a in e)!i.isObject(e[a])||i.isFunction(e[a])||i.isArray(e[a])?t[a]=e[a]:(Object.prototype.hasOwnProperty.call(t,a)||(t[a]={}),r(t[a],e[a]));return t},a=/(;.*?)(?=#|\?|$)/gm,n=function(t,e){var r=t.replace(a,""),n=document.createElement("a");n.href=r;var i={protocol:n.protocol,host:n.host,pathname:"/"===n.pathname?"":n.pathname,hash:n.hash?n.hash.substr(1):"",search:"",parameters:{}};if(n.search.length){var o=[];n.search.substr(1).split("&").forEach((function(t){var r=t.split("="),a=r[0],n=r[1];e[a]&&"undefined"!==n&&(i.parameters[a]=n,o.push(t))})),i.search=o.join("&")}return i},i={isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isScalar:function(t){return i.isString(t)||i.isNumber(t)||i.isBoolean(t)},isObject:function(t){return Object(t)===t},isFunction:function(t){return"function"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isUndefined:function(t){return void 0===t},ensureArray:function(t,e){return void 0===e&&(e=","),"string"==typeof t&&(t=t.split(e)),t},prefixObject:function(t,e){var r,a={};for(r in t)a[e+r]=t[r];return a},createUrl:function(t){var e,r=[];if(e=t.baseUrl,t.query){for(var a in t.query)r.push(a+"="+encodeURIComponent(t.query[a]));e+="?"+r.join("&")}return e},sanitizeUrl:function(t,e){var r,a=n(t,e);return r="".concat(a.protocol,"//").concat(a.host).concat(a.pathname),a.search&&(r+="?"+a.search),a.hash&&"."===a.hash[0]&&(r+="#"+a.hash),r},mergeDeep:r,urlParser:n,getDomain:function(t){var e=(t||location.hostname).split("."),r=e.length;if(r<2)return null;var a=r-2;if("uk"===e[r-1]){if(r<3)return null;a=r-3}return e.slice(a).join(".")},localStorageAvailable:function(){try{var t="__storage_test__";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}};e.util=i},6530:function(t,e,r){"use strict";const a=r(57),n=r(5436),i=r(7005);t.exports=function t(e,r){switch(n(e)){case"object":return function(e,r){if("function"==typeof r)return r(e);if(r||i(e)){const a=new e.constructor;for(let n in e)a[n]=t(e[n],r);return a}return e}(e,r);case"array":return function(e,r){const a=new e.constructor(e.length);for(let n=0;n<e.length;n++)a[n]=t(e[n],r);return a}(e,r);default:return a(e)}}},7005:function(t,e,r){"use strict";var a=r(5935);function n(t){return!0===a(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,r;return!1!==n(t)&&"function"==typeof(e=t.constructor)&&!1!==n(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},5935:function(t){"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},5436:function(t){var e=Object.prototype.toString;function r(t){return"function"==typeof t.constructor?t.constructor.name:null}t.exports=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var a=typeof t;if("boolean"===a)return"boolean";if("string"===a)return"string";if("number"===a)return"number";if("symbol"===a)return"symbol";if("function"===a)return"GeneratorFunction"===r(t)?"generatorfunction":"function";if(function(t){return Array.isArray?Array.isArray(t):t instanceof Array}(t))return"array";if(function(t){return!(!t.constructor||"function"!=typeof t.constructor.isBuffer)&&t.constructor.isBuffer(t)}(t))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(t))return"arguments";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(t))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(t))return"error";if(function(t){return t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global}(t))return"regexp";switch(r(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(t){return"function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next}(t))return"generator";switch(a=e.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return a.slice(8,-1).toLowerCase().replace(/\s/g,"")}},57:function(t,e,r){"use strict";const a=Symbol.prototype.valueOf,n=r(5436);t.exports=function(t,e){switch(n(t)){case"array":return t.slice();case"object":return Object.assign({},t);case"date":return new t.constructor(Number(t));case"map":return new Map(t);case"set":return new Set(t);case"buffer":return function(t){const e=t.length,r=Buffer.allocUnsafe?Buffer.allocUnsafe(e):Buffer.from(e);return t.copy(r),r}(t);case"symbol":return function(t){return a?Object(a.call(t)):{}}(t);case"arraybuffer":return function(t){const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}(t);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function(t,e){return new t.constructor(t.buffer,t.byteOffset,t.length)}(t);case"regexp":return function(t){const e=void 0!==t.flags?t.flags:/\w+$/.exec(t)||void 0,r=new t.constructor(t.source,e);return r.lastIndex=t.lastIndex,r}(t);case"error":return Object.create(t);default:return t}}}},e={},r=function r(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,r),i.exports}(8983);TrackLib=r}();
//# sourceMappingURL=tracklib.min.map