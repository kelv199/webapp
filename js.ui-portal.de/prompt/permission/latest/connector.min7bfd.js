(()=>{"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t});for(var e,n=(a=void 0,void 0,s=-1===(a=window.location.hostname).indexOf("co.uk")?"-2":"-3",a.split(".").slice(s).join(".").split(".")),t=0,o=0,i=!1,c=0;c<n.length;c++)-1!==["gmx","web","mail","1und1"].indexOf(n[c])&&(t=c,i=!0),i&&++o;var a,s;e=2>=o?"".concat(n[t],".").concat(n[t+1]):"".concat(n[t],".").concat(n[t+1],".").concat(n[t+2]);var r=(document.querySelector('script[src*="connector"]')||{}).src;if(!r)throw"The script was not found in DOM.";var l=function(e){var n={};return(""+e).replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,o){n[decodeURIComponent(t)]=decodeURIComponent(o)})),n}(r),d=-1<r.indexOf("/src/")||-1<r.indexOf("/qa/")?"qa":"latest",m=STAGE_TCF_API="qa"==d?"qa":"live",u=d,p="https://dl.".concat(e,"/permission/").concat(m,"/v").concat(1,"/ppp/js/permission-client.js"),f="https://dl.".concat(e,"/permission/").concat(m,"/v").concat(1,"/ppp/js/permission-client-compat.js"),w="https://dl.".concat(e,"/permission/").concat(m,"/v").concat(1,"/ppp/js/polyfills/promise.min.js"),v="https://dl.".concat(e,"/tcf/").concat(STAGE_TCF_API,"/v").concat(1,"/js/tcf-api.js"),g="https://js.ui-portal.de/prompt/permission/".concat(u,"/tracking.min.js"),C=l.exclude||"",E=-1===C.indexOf("ppp"),h=-1===C.indexOf("tcf"),y=-1===C.indexOf("tracking"),L=["brainTracking","googleAdRemarketing","googleAdsConversionTracking"],x=function(){var n,t=document.createElement("div");t.classList.add("permission-layer-container"),document.getElementsByTagName("body")[0].appendChild(t);var o={gmxde:"gmx",gmxnet:"gmx","1und1de":"1und1"},i={portal:(l.portal||"").replace(/[^a-z0-9]/gi,""),category:l.category||"permission",layerContainer:".permission-layer-container",consentParameters:{lang:document.documentElement.lang||"de",tcf:"2",tcfLayerMode:!0},getModel:function(){var e=PermissionClient.DEFAULT_HANDLER.getModel();return window.PermissionClientCompat.computeModelByConsentLevel(e)},getIdentity:function(){},onChange:function(e){var n=window.PermissionClientCompat.computeConsentLevelByModel(e);window.PermissionClientCompat.setConsentLevel(n),window.PermissionClient.DEFAULT_HANDLER.onChange(e)},onResizeLayer:function(){},onComplete:function(){var e;window.PermissionClientCompat.setConsentLevel("2"),window.PermissionClientCompat.updateModelByConsentLevel(),window.PermissionClient.DEFAULT_HANDLER.onComplete(),null===(e=document.querySelector(".permission-layer-container"))||void 0===e||e.remove()},onShowLayer:function(){}};if(i.portal)i.portal=o[i.portal]||i.portal;else{var c=location.host.split(".");c=-1!==c.indexOf("co")&&-1!==c.indexOf("uk")?c.splice(-3):c.splice(-2),i.portal=c.join("").replace(/[^a-z0-9]/gi,""),i.portal=o[i.portal]||i.portal,-1!==["gmx","gmxat","gmxch","gmxfr","gmxes","gmxcom","gmxcouk","1und1","webde","mailcom"].indexOf(i.portal)||(i.portal="permission")}if(i.section=l.section||"permission"===i.category&&"other",i.section||delete i.section,"function"!=typeof window.Promise){var a=document.createElement("script");a.src=w,a.addEventListener("load",(function(){setTimeout((function(){window.PermissionClientCompat.init(window.PermissionClient,{cookieDomain:e}),window.PermissionClient.init(i)}),2)})),document.getElementsByTagName("head")[0].appendChild(a)}else window.PermissionClientCompat.init(window.PermissionClient,{cookieDomain:e}),window.PermissionClient.init(i);null===(n=document.querySelectorAll('a[href="#trigger-permission-layer"]'))||void 0===n||n.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),i.forcePermissionLayer="tcf_v2",i.consentParameters.tcfLayerMode="resurface",window.PermissionClient.init(i)}))}))};window.consent={features:{},full:!1};var P=function(){if(E){var e=document.createElement("script");e.src=p,e.defer=!0;var n=document.createElement("script");n.src=f,n.defer=!0,document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("head")[0].appendChild(n),window.addEventListener("load",x)}},T=function(){if(y){var e;if(null!==(e=window.consent)&&void 0!==e&&e.full)L.forEach((function(e){window.consent.features[e]=window.consent.full}));else try{window.__tcfapi("addEventListener",2,(function(){L.forEach((function(e){window.__tcfapi("getPermission",2,(function(n){null==n&&(n=!1),window.consent.features[e]=n}),e)}))}))}catch(e){L.forEach((function(e){window.consent.features[e]=!1}))}var n=document.createElement("script");n.src=g,n.defer=!0,document.getElementsByTagName("body")[0].appendChild(n)}};if(h){var b=!1,_=document.createElement("script");_.src=v;var A=function(){P(),T()},j=function(e){var n=e.success,t=e.timeout;"qa"==d&&console.log("tcfLoad: fired (success: ".concat(n,", timeout: ").concat(t,")"));var o=new CustomEvent("tcfLoad",{detail:{bubbles:!0,success:n,timeout:t}});document.dispatchEvent(o)},O=setTimeout((function(){b=!0,j({success:!1,timeout:!0})}),6e3);_.onload=function(){if(!b){clearTimeout(O),"qa"==d&&console.log("tcfLoad: loaded");try{window.__tcfapi("addEventListener",2,(function(){window.__tcfapi("getPermission",2,(function(e){null==e&&(e=!1),window.consent.full=e}),"fullConsent")}))}catch(e){}j({success:!0,timeout:!1}),A()}},_.onerror=function(){b||(clearTimeout(O),"qa"==d&&console.log("tcfLoad: error"),j({success:!1,timeout:!1}),A())},window.addEventListener("DOMContentLoaded",(function(){document.getElementsByTagName("head")[0].appendChild(_)}))}else P(),T()})();
//# sourceMappingURL=connector.min.js.map